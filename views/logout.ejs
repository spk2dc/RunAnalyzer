<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    
    <link rel="stylesheet" href="/css/style.css"> 

    <%// automatically refreshes the page after the given number of seconds and loads the url specified (relative parent directory in this case) %>
    <meta http-equiv="refresh" content="0.5; url='../'" />
</head>

<body>
    <h3>Logging Out... <a href="../">click to go home</a></h3>

    <%// Strava refusing to connect within iframe %>
    <%// <iframe src="https://www.strava.com/logout" frameborder="Strava User Account Logout Page"></iframe>%>
    
    <div id="siteloader"></div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>



    <script>

        $(()=>{
            //run jquery script to logout of Strava user's account
            $("#siteloader").html('<object data="https://www.strava.com/logout" />');

            //below function not needed due to automatic refresh using meta tag in the header
            /* 
            //wait 2 seconds and then go to parent directory (website home page)
            setTimeout(() => {
                window.location.href = '../' 
            }, 2000);
            */
            
        })
        

        /*
        sources: 

        https://stackoverflow.com/questions/34753782/how-to-chain-redirects-in-node-express

        https://www.w3schools.com/tags/tag_iframe.asp

        https://groups.google.com/forum/#!topic/strava-api/DjfRRWsPFuk

        https://www.w3docs.com/snippets/html/how-to-redirect-a-web-page-in-html.html

        https://stackoverflow.com/questions/18145273/how-to-load-an-external-webpage-into-a-div-of-a-html-page

        https://stackoverflow.com/questions/1655065/redirecting-to-a-relative-url-in-javascript

        */
    </script>
</body>

</html>